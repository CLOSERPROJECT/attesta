{{define "layout.html"}}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Closer Demo</title>
    {{if .ViteDevServer}}
    <script type="module" src="{{.ViteDevServer}}/@vite/client"></script>
    <script type="module" src="{{.ViteDevServer}}/src/main.js"></script>
    {{else}}
    <link rel="stylesheet" href="/static/assets/main.css" />
    <script defer src="/static/assets/app.js"></script>
    {{end}}
    <script
      src="https://unpkg.com/htmx.org@1.9.12"
      integrity="sha384-ujb1lZYygJmzgSwoxRggbCHcjc0rB2XoQrxeTUQyRjrOnlCoYta87iKBWq3EsdM2"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <header class="topbar">
      <div>
        <a class="brand" href="/">ATTESTA</a>
        <span class="tag">Proof-ready streams for traceable compliance</span>
      </div>
      <nav class="nav">
        <button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle theme" title="Toggle theme">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="theme-icon theme-icon-moon" viewBox="0 0 16 16" aria-hidden="true">
            <path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.527 0 1.04-.075a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278"/>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="theme-icon theme-icon-sun" viewBox="0 0 16 16" aria-hidden="true">
            <path d="M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6m0 1a4 4 0 1 1 0-8 4 4 0 0 1 0 8m9-4a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1 0-1h1a.5.5 0 0 1 .5.5m-13 0a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1 0-1h1A.5.5 0 0 1 3 8m10.657 5.657a.5.5 0 0 1-.707 0l-.708-.707a.5.5 0 0 1 .708-.708l.707.708a.5.5 0 0 1 0 .707m-9.193-9.193a.5.5 0 0 1-.707 0l-.708-.707a.5.5 0 1 1 .708-.708l.707.708a.5.5 0 0 1 0 .707m9.193-2.121a.5.5 0 0 1 0 .707l-.707.708a.5.5 0 1 1-.708-.708l.708-.707a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707l-.707.708a.5.5 0 0 1-.708-.708l.708-.707a.5.5 0 0 1 .707 0M8 3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 1 0v1A.5.5 0 0 1 8 3m0 10a.5.5 0 0 1-.5.5v1a.5.5 0 0 1 1 0v-1A.5.5 0 0 1 8 13"/>
          </svg>
        </button>
        {{if .ShowLogout}}
          <details class="account-menu">
            <summary class="account-trigger" aria-label="Open account menu">
              <svg class="account-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
              </svg>
            </summary>
            <div class="account-dropdown">
              <section class="account-menu-section">
                <p class="account-menu-label">Signed in as</p>
                <p class="account-menu-email">{{if .UserEmail}}{{.UserEmail}}{{else}}Account{{end}}</p>
              </section>
              {{if or .ShowOrgsLink .ShowMyOrgLink}}
                <section class="account-menu-section">
                  {{if .ShowOrgsLink}}<a href="/admin/orgs" class="account-menu-item">Orgs</a>{{end}}
                  {{if .ShowMyOrgLink}}<a href="/org-admin/users" class="account-menu-item">My Org</a>{{end}}
                </section>
              {{end}}
              <section class="account-menu-section">
                <form method="post" action="/logout">
                  <button type="submit" class="account-menu-item">Logout</button>
                </form>
              </section>
            </div>
          </details>
        {{end}}
      </nav>
    </header>
    <main class="page">
      {{if eq .Body "home_picker_body"}}{{template "home_picker_body" .}}
      {{else if eq .Body "login_body"}}{{template "login_body" .}}
      {{else if eq .Body "invite_body"}}{{template "invite_body" .}}
      {{else if eq .Body "reset_request_body"}}{{template "reset_request_body" .}}
      {{else if eq .Body "reset_set_body"}}{{template "reset_set_body" .}}
      {{else if eq .Body "dashboard_body"}}{{template "dashboard_body" .}}
      {{else if eq .Body "platform_admin_body"}}{{template "platform_admin_body" .}}
      {{else if eq .Body "org_admin_body"}}{{template "org_admin_body" .}}
      {{else if eq .Body "home_body"}}{{template "home_body" .}}
      {{else if eq .Body "process_body"}}{{template "process_body" .}}
      {{else if eq .Body "dpp_body"}}{{template "dpp_body" .}}
      {{else if eq .Body "backoffice_picker_body"}}{{template "backoffice_picker_body" .}}
      {{else if eq .Body "backoffice_landing_body"}}{{template "backoffice_landing_body" .}}
      {{else if eq .Body "dept_dashboard_body"}}{{template "dept_dashboard_body" .}}
      {{else if eq .Body "dept_process_body"}}{{template "dept_process_body" .}}
      {{end}}
    </main>
    <footer
      class="site-footer"
      style="
        padding: 18px 32px 24px;
        border-top: 1px solid var(--border);
        background: var(--chrome-bg);
      "
    >
      <p
        style="
          margin: 0 0 8px;
          color: var(--muted);
          font-size: 12px;
          line-height: 1.4;
        "
      >
        © 2025-2026 Forkbomb bv (forkbomb.eu) — The Forkbomb Company. Licensed
        under the GNU AGPLv3.
      </p>
      <p
        style="
          margin: 0 0 8px;
          color: var(--muted);
          font-size: 12px;
          line-height: 1.4;
        "
      >
        CLOSER (Circular raw materiaLs for european Open Strategic autonomy on
        chips and microElectronics pRoduction, Project No. 101161109) is funded
        by the European Union under the Interregional Innovation Investments
        (I3) Instrument of the European Regional Development Fund, managed by
        the European Innovation Council and SMEs Executive Agency (EISMEA).
      </p>
      <p
        style="
          margin: 0;
          color: var(--muted);
          font-size: 12px;
          line-height: 1.4;
        "
      >
        This repository/website is part of the CLOSER project and has received
        funding from the European Union. Views and opinions expressed are those
        of the author(s) only and do not necessarily reflect those of the
        European Union or EISMEA. Neither the European Union nor the granting
        authority can be held responsible for them.
      </p>
    </footer>
  </body>
</html>
{{end}}
